---
title: Chat
layout: null
permalink: /chat/
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Chat</title>
  {% include analytics/goatcounter.html %}

  <!-- n8n chat styles (do not modify) -->
  <link href="https://cdn.jsdelivr.net/npm/@n8n/chat/dist/style.css" rel="stylesheet"/>

  <style>
    /* Minimal, modern page shell — does not touch n8n chat CSS */
    :root{
      color-scheme: dark;
      --bg:#0e1222; --text:#f6f7ff; --muted:#c7ceee;
      --wrap: 1080px; --r:14px; --line:rgba(255,255,255,.12);
    }
    *{ box-sizing:border-box; }
    html, body{ height:100%; }
    body{
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--text);
      background:
        radial-gradient(1200px 700px at -10% -10%, rgba(29,25,70,.9) 0%, rgba(29,25,70,0) 60%),
        radial-gradient(1200px 700px at 110% 10%, rgba(15,42,74,.85) 0%, rgba(15,42,74,0) 60%),
        linear-gradient(180deg, #0d1023, #0e1222);
    }
    .container{ max-width:var(--wrap); margin:0 auto; padding:16px; }
    header{ padding:10px 0 4px; }
    .brand{ font-weight:800; letter-spacing:.2px; }
    #layout{
      display:grid; gap:16px;
      grid-template-columns: 1fr 1.2fr;
      align-items:start;
    }
    @media (max-width: 900px){ #layout{ grid-template-columns: 1fr; } }

    .blurb{
      border:1px solid var(--line); border-radius:var(--r);
      padding:14px; background: rgba(255,255,255,.06);
    }
    .blurb p{ margin:0; color:var(--muted); line-height:1.6; }
    #chatPane{
      border:1px solid var(--line); border-radius:var(--r);
      background: rgba(255,255,255,.06); overflow:hidden;
      min-height: 60vh; /* space for the n8n chat */
    }
    #n8n-chat{ min-height: 60vh; } /* mount target */
    .skeleton{ padding:16px; color:var(--muted); }
    footer{ margin-top:16px; padding-top:10px; border-top:1px solid var(--line); color:var(--muted); }
  </style>
</head>
<body>
  <main class="container">
    <header class="brand">Assistant</header>

    <section id="layout">
      <div class="blurb">
        <p>
          Ask anything. Get smart answers.<br/>
          Use the chat on the right to talk to the assistant. It can help with language practice, quick lookups.
        </p>
      </div>

      <div id="chatPane">
        <!-- n8n mounts here -->
        <div id="n8n-chat">
          <div class="skeleton">Loading chat…</div>
        </div>
      </div>
    </section>

    <footer>
      <div style="font-size: 0.9rem; color: #ffffff; margin-bottom: 1rem;">
        <span>
          <em id="pageviews" style="font-style: normal; font-weight: bold; color: #ffffff;">
            Loading…
          </em> visitors
        </span>
      </div>
    </footer>
  </main>

  <script type="module">
    import { createChat } from 'https://cdn.jsdelivr.net/npm/@n8n/chat/dist/chat.bundle.es.js';

    const TOKEN_ENDPOINT   = 'https://n8n.kuibin.workers.dev/api/token';
    const N8N_WEBHOOK_URL = 'https://n8n.linsnode.com/webhook/bf4dd093-bb02-472c-9454-7ab9af97bd1d';

    async function getToken() {
      const res = await fetch(TOKEN_ENDPOINT, { method: 'POST' });
      if (!res.ok) {
        const msg = await res.text().catch(() => res.statusText);
        throw new Error(`Token request failed: ${res.status} ${msg}`);
      }
      const { token } = await res.json();
      if (!token) throw new Error('No token returned');
      return token;
    }

    async function boot() {
      try{
        const token = await getToken();
        createChat({
          webhookUrl: N8N_WEBHOOK_URL,
          target: '#n8n-chat',
          enableStreaming: false,
          webhookConfig: {
            method: 'POST',
            headers: {
              'Authorization': `Bearer ${token}`,
              'Content-Type': 'application/json'
            }
          }
        });
      }catch(err){
        console.error(err);
        const sk = document.querySelector('#n8n-chat .skeleton');
        if(sk) sk.textContent = 'Chat unavailable. Please try again later.';
      }
    }
    boot();
  </script>
  </script>
  {% include pageviews/goatcounter.html %}
</body>
</html>
